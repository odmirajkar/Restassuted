{
  "file_name": "VisitController.java",
  "file_path": "org/springframework/samples/petclinic/owner/VisitController.java",
  "file_summary": "The `VisitController` class is a Spring MVC controller in the PetClinic application, dedicated to handling web requests related to pet visits. It manages the creation of new visits for specific pets belonging to a particular owner. The controller uses `OwnerRepository` to fetch and save owner and pet data. Key functionalities include pre-loading necessary `Owner`, `Pet`, and `Visit` objects before each request via the `@ModelAttribute` method, which ensures data freshness and correct object association. It configures the `WebDataBinder` to prevent binding of the 'id' field for security and data integrity. The controller provides endpoints for displaying the visit creation form (`GET`) and processing its submission (`POST`), including server-side validation for the `Visit` object and persisting the changes.",
  "attributes": [
    {
      "name": "owners",
      "type": "OwnerRepository",
      "membership_type": "private final"
    }
  ],
  "functions": [
    {
      "name": "VisitController",
      "parameters": [
        {
          "name": "owners",
          "type": "OwnerRepository"
        }
      ],
      "return_type": "void (constructor)",
      "access_modifier": "public"
    },
    {
      "name": "setAllowedFields",
      "parameters": [
        {
          "name": "dataBinder",
          "type": "WebDataBinder"
        }
      ],
      "return_type": "void",
      "access_modifier": "public"
    },
    {
      "name": "loadPetWithVisit",
      "parameters": [
        {
          "name": "ownerId",
          "type": "int"
        },
        {
          "name": "petId",
          "type": "int"
        },
        {
          "name": "model",
          "type": "Map<String, Object>"
        }
      ],
      "return_type": "Visit",
      "access_modifier": "public"
    },
    {
      "name": "initNewVisitForm",
      "parameters": [],
      "return_type": "String",
      "access_modifier": "public"
    },
    {
      "name": "processNewVisitForm",
      "parameters": [
        {
          "name": "owner",
          "type": "Owner"
        },
        {
          "name": "petId",
          "type": "int"
        },
        {
          "name": "visit",
          "type": "Visit"
        },
        {
          "name": "result",
          "type": "BindingResult"
        },
        {
          "name": "redirectAttributes",
          "type": "RedirectAttributes"
        }
      ],
      "return_type": "String",
      "access_modifier": "public"
    }
  ]
}