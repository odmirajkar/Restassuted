{
  "file_name": "PetController.java",
  "file_path": "org/springframework/samples/petclinic/owner/PetController.java",
  "file_summary": "The `PetController` class is a Spring MVC controller responsible for handling web requests related to `Pet` entities within the PetClinic application, specifically for pets belonging to a particular owner. It is mapped to `/owners/{ownerId}` and provides functionality to create and update pet information. The controller utilizes `@ModelAttribute` methods to pre-populate common data like `PetType`s, the `Owner` object (based on `ownerId` from the path), and the `Pet` object itself (for editing existing pets or creating new ones). It integrates with `OwnerRepository` and `PetTypeRepository` for data access. Key operations include displaying forms for adding or editing pets (`initCreationForm`, `initUpdateForm`), and processing form submissions (`processCreationForm`, `processUpdateForm`). Validation logic is applied to ensure data integrity, checking for duplicate pet names for an owner and validating birth dates. Upon successful form submission, changes are persisted via the `OwnerRepository`, and the user is redirected, often with flash attributes for messages.",
  "attributes": [
    {
      "name": "VIEWS_PETS_CREATE_OR_UPDATE_FORM",
      "data_type": "String",
      "membership_type": "private static final"
    },
    {
      "name": "owners",
      "data_type": "OwnerRepository",
      "membership_type": "private final"
    },
    {
      "name": "types",
      "data_type": "PetTypeRepository",
      "membership_type": "private final"
    }
  ],
  "functions": [
    "PetController(OwnerRepository owners, PetTypeRepository types)",
    "populatePetTypes(): Collection<PetType>",
    "findOwner(int ownerId): Owner",
    "findPet(int ownerId, Integer petId): Pet",
    "initOwnerBinder(WebDataBinder dataBinder): void",
    "initPetBinder(WebDataBinder dataBinder): void",
    "initCreationForm(Owner owner, ModelMap model): String",
    "processCreationForm(Owner owner, Pet pet, BindingResult result, RedirectAttributes redirectAttributes): String",
    "initUpdateForm(): String",
    "processUpdateForm(Owner owner, Pet pet, BindingResult result, RedirectAttributes redirectAttributes): String",
    "updatePetDetails(Owner owner, Pet pet): void"
  ],
  "dependent_class_list": [
    "java.time.LocalDate",
    "java.util.Collection",
    "java.util.Optional",
    "org.springframework.stereotype.Controller",
    "org.springframework.ui.ModelMap",
    "org.springframework.util.StringUtils",
    "org.springframework.validation.BindingResult",
    "org.springframework.web.bind.WebDataBinder",
    "org.springframework.web.bind.annotation.GetMapping",
    "org.springframework.web.bind.annotation.InitBinder",
    "org.springframework.web.bind.annotation.ModelAttribute",
    "org.springframework.web.bind.annotation.PathVariable",
    "org.springframework.web.bind.annotation.PostMapping",
    "org.springframework.web.bind.annotation.RequestMapping",
    "jakarta.validation.Valid",
    "org.springframework.web.servlet.mvc.support.RedirectAttributes",
    "OwnerRepository",
    "PetTypeRepository",
    "Owner",
    "Pet",
    "PetType",
    "PetValidator"
  ]
}